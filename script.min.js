const input = document.getElementById("input"),
  loader = document.getElementById("loader"),
  error = document.getElementById("error"),
  showList = document.getElementById("showList");
function searchShows() {
  let e = input.value;
  if (e) {
    showLoader();
    let s = new XMLHttpRequest();
    s.open("GET", `https://api.tvmaze.com/search/shows?q=${e}`),
      s.send(),
      (s.onload = () => {
        if (200 === s.status) {
          let e = JSON.parse(s.responseText);
          e.length
            ? ((showList.innerHTML = ""),
              e.forEach((e) => {
                let s = document.createElement("li");
                (s.innerText =
                  e.show.name +
                  "," +
                  e.score +
                  "," +
                  e.show.genres.toString() +
                  "," +
                  e.show.summary),
                  showList.appendChild(s);
              }),
              (error.style.display = "none"),
              (loader.style.display = "none"),
              (showList.style.display = "block"))
            : showError();
        } else showError();
      });
  } else showList.innerHTML = "";
}
function showLoader() {
  (loader.style.display = "block"),
    (showList.style.display = "none"),
    (error.style.display = "none");
}
function showError() {
  (loader.style.display = "none"),
    (showList.style.display = "none"),
    (error.style.display = "block");
}
input.addEventListener("input", () => searchShows());
